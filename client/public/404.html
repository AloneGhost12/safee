<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal Vault</title>
    <link rel="icon" type="image/x-icon" href="/safee/favicon.ico" />
    
    <!-- Enhanced SPA Redirect for GitHub Pages and subdirectory deployments -->
    <script>
      // Enhanced redirect for GitHub Pages SPA with base path support
      var l = window.location;
      var basePath = '/safee/'; // This should match your deployment base path
      var base = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + basePath;
      
      console.log('ðŸ”„ 404 Redirect Debug:', {
        requestedPath: l.pathname,
        hostname: l.hostname,
        basePath: basePath,
        redirectTo: base,
        isSubdirectory: l.pathname.startsWith('/safee/'),
        currentURL: l.href
      });
      
      // Check if we're already in the correct base path
      if (l.pathname.startsWith(basePath) && l.pathname !== basePath) {
        // Store the intended path in sessionStorage so the app can pick it up
        var relativePath = l.pathname.substring(basePath.length - 1); // Keep the leading slash
        sessionStorage.setItem('redirectPath', relativePath + l.search + l.hash);
        console.log('ðŸ”„ Storing relative path for SPA routing:', relativePath);
      } else if (l.pathname === '/' || !l.pathname.startsWith(basePath)) {
        // If at root or outside base path, just redirect to base
        sessionStorage.setItem('redirectPath', '/vault'); // Default to vault page
        console.log('ðŸ”„ Root access, redirecting to default page');
      }
      
      // Always redirect to the base URL and let the SPA handle routing
      console.log('ðŸ”„ Redirecting to:', base);
      l.replace(base);
    </script>
  </head>
  <body>
    <div style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
      <h2>Redirecting...</h2>
      <p>Taking you to the Personal Vault app...</p>
    </div>
  </body>
</html>
